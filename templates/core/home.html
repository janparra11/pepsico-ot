{% extends "base.html" %}
{% block title %}Inicio{% endblock %}
{% block content %}
<div class="bg-white p-4 rounded shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h5 mb-0">Bienvenido, {{ username }}</h1>
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
    {% if can_registrar_ingreso %}
    <div class="col">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <h2 class="h6">Registrar ingreso</h2>
          <p class="text-muted small mb-3">Crear una nueva OT a partir de patente y taller.</p>
          <div class="mt-auto">
            <a class="btn btn-primary w-100" href="{% url 'ingreso_nuevo' %}">Nuevo ingreso</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    {% if can_ver_ots %}
    <div class="col">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <h2 class="h6">Órdenes de Trabajo</h2>
          <p class="text-muted small mb-3">Listado con filtros por estado, prioridad y búsqueda.</p>
          <div class="mt-auto">
            <a class="btn btn-outline-primary w-100" href="{% url 'ot_lista' %}">Ver OTs</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    {% if can_ver_dashboard %}
    <div class="col">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <h2 class="h6">Dashboard</h2>
          <p class="text-muted small mb-3">KPIs y gráficos (estados, prioridades, talleres, pausas).</p>
          <div class="mt-auto">
            <a class="btn btn-outline-secondary w-100" href="{% url 'ot_dashboard' %}">Abrir dashboard</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    {% if can_ver_notifs %}
    <div class="col">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <h2 class="h6">Notificaciones</h2>
          <p class="text-muted small mb-3">Eventos recientes de tus OTs (cambios, pausas, documentos).</p>
          <div class="mt-auto">
            <a class="btn btn-outline-secondary w-100" href="{% url 'core_notificaciones' %}">Ver notificaciones</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
